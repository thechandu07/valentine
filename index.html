<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Valentine Gift Card</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;margin:0;font-family:Poppins}
body{background:#000;color:#fff}

#page1,#page2{
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}

#page1{
  background:linear-gradient(120deg,#ff0844,#ffb199);
  animation:bg 6s infinite alternate;
}
@keyframes bg{to{background-position:100%}}

.card{
  background:#fff;
  color:#000;
  width:92%;
  max-width:420px;
  border-radius:20px;
  padding:18px;
  text-align:center;
}

h1{
  font-family:'Great Vibes',cursive;
  font-size:clamp(28px,6vw,38px);
  color:#e6005c;
}

.preview{
  height:180px;
  background:#ddd center/cover;
  border-radius:15px;
  margin:12px 0;
}

input,button{
  width:100%;
  padding:12px;
  margin-top:8px;
  border-radius:12px;
  font-size:16px;
}

button{
  border:none;
  background:#e6005c;
  color:#fff;
}

footer{
  margin-top:12px;
  font-size:13px;
  opacity:.8;
}

/* ---------- PAGE 2 ---------- */
#page2{
  display:none;
  background-size:cover;
  background-position:center;
}
.overlay{
  background:rgba(0,0,0,.65);
  min-height:100vh;
  width:100%;
  padding:20px;
}

.top{
  display:flex;
  justify-content:space-between;
  flex-wrap:wrap;
  gap:8px;
}

.home{
  background:#fff;
  color:#000;
  padding:6px 16px;
  border-radius:20px;
  border:none;
}

.gift{
  margin:clamp(40px,12vh,90px) auto 0;
  background:rgba(255,255,255,.92);
  color:#000;
  padding:25px;
  border-radius:20px;
  text-align:center;
  max-width:420px;
  animation:pulse 2.5s infinite;
}
@keyframes pulse{50%{transform:scale(1.03)}}

.label{font-size:18px;color:#e6005c}
.quote{
  font-family:'Great Vibes',cursive;
  font-size:clamp(24px,6vw,32px);
  color:#e6005c;
  margin-top:10px;
}
.nepali{font-size:clamp(14px,4.5vw,18px)}

.actions{
  text-align:center;
  margin-top:25px;
}
.actions button{margin-top:10px}
</style>
</head>

<body>

<!-- PAGE 1 -->
<div id="page1">
  <div class="card">
    <h1>Happy Valentine Week</h1>

    <div id="preview" class="preview"></div>

    <input id="you" placeholder="Your Name">
    <input id="partner" placeholder="Partner Name">
    <input type="file" id="img" accept="image/*">

    <button onclick="create()">Create Card üíù</button>

    <footer>
      Developer: Chandu<br>
      <a href="https://wa.me/9779802985732" target="_blank">
        WhatsApp +977 9802985732
      </a>
    </footer>
  </div>
</div>

<!-- PAGE 2 -->
<div id="page2">
  <div class="overlay">
    <div class="top">
      <button class="home" onclick="location.reload()">Home</button>
      <div id="time"></div>
      <div id="nepDate"></div>
    </div>

    <div class="gift" id="card">
      <div id="label" class="label"></div>
      <div id="quote" class="quote"></div>
      <div id="nepali" class="nepali"></div>
    </div>

    <div class="actions">
      <button onclick="download('portrait')">Download Portrait PNG üì•</button>
      <button onclick="download('landscape')">Download Landscape PNG üì•</button>
      <button onclick="share()">Share üíå</button>
    </div>

    <footer style="text-align:center;margin-top:30px">
      Developer WhatsApp: +977 9802985732
    </footer>
  </div>
</div>

<script>
let img64="";

img.onchange=e=>{
  const r=new FileReader();
  r.onload=()=>{img64=r.result;preview.style.backgroundImage=`url(${img64})`}
  r.readAsDataURL(e.target.files[0]);
}

function create(){
  if(!img64||!you.value||!partner.value){alert("Fill all fields");return;}
  sessionStorage.setItem("img",img64);
  sessionStorage.setItem("you",you.value);
  sessionStorage.setItem("partner",partner.value);
  openCard();
}

function openCard(){
  page1.style.display="none";
  page2.style.display="block";
  page2.style.backgroundImage=`url(${sessionStorage.getItem("img")})`;
  setQuote();
  setInterval(updateTime,1000);
  updateTime();
}

function updateTime(){
  const d=new Date();
  time.innerText=d.toLocaleString();
  nepDate.innerText="‡§µ‡§ø.‡§∏‡§Ç.: "+toBS(d);
}

/* Valentine quotes */
function setQuote(){
  const d=new Date().getDate();
  const y=sessionStorage.getItem("you");
  const p=sessionStorage.getItem("partner");

  const days={
    7:["üåπ Rose Day","This rose is for you","‡§Ø‡•ã ‡§ó‡•Å‡§≤‡§æ‡§¨ ‡§§‡§ø‡§Æ‡•ç‡§∞‡•ã ‡§≤‡§æ‡§ó‡§ø"],
    8:["üíç Propose Day",`${y}, I choose you`,`‡§Æ ‡§§‡§ø‡§Æ‡•Ä‡§≤‡§æ‡§à ‡§∞‡•ã‡§ú‡•ç‡§õ‡•Å`],
    9:["üç´ Chocolate Day","Life is sweeter with you","‡§ú‡•Ä‡§µ‡§® ‡§§‡§ø‡§Æ‡•Ä ‡§∏‡§Ç‡§ó ‡§Æ‡§ø‡§†‡•ã ‡§õ"],
    10:["üß∏ Teddy Day","You are my comfort","‡§§‡§ø‡§Æ‡•Ä ‡§Æ‡•á‡§∞‡•ã ‡§®‡•ç‡§Ø‡§æ‡§®‡•ã ‡§∏‡§æ‡§•"],
    11:["ü§ù Promise Day","Forever together","‡§∏‡§ß‡•à‡§Ç ‡§∏‡§Ç‡§ó‡•à ‡§∞‡§π‡§®‡•á ‡§µ‡§æ‡§ö‡§æ"],
    12:["üíã Kiss Day","A kiss full of love","‡§Æ‡§æ‡§Ø‡§æ‡§≤‡•á ‡§≠‡§∞‡§ø‡§è‡§ï‡•ã ‡§ö‡•Å‡§Æ‡•ç‡§¨‡§®"],
    13:["ü§ó Hug Day","This hug says everything","‡§Ø‡•ã ‡§Ö‡§Å‡§ó‡§æ‡§≤‡•ã‡§≤‡•á ‡§∏‡§¨‡•à ‡§≠‡§®‡•ç‡§õ"],
    14:["‚ù§Ô∏è Valentine‚Äôs Day",`Happy Valentine‚Äôs Day ${p}`,"‡§π‡•ç‡§Ø‡§æ‡§™‡•ç‡§™‡•Ä ‡§≠‡•ç‡§Ø‡§æ‡§≤‡•á‡§®‡•ç‡§ü‡§æ‡§á‡§® ‡§°‡•á ‚ù§Ô∏è"]
  };
  const v=days[d]||["üíñ Love Day",`${y} & ${p} Forever`,`‡§∏‡§ß‡•à‡§Ç ‡§∏‡§Ç‡§ó‡•à ‚ù§Ô∏è`];
  label.innerText=v[0];
  quote.innerText=v[1];
  nepali.innerText=v[2];
}

/* Auto-fit text */
function fitText(ctx,text,maxWidth,startSize,font){
  let size=startSize;
  do{
    ctx.font=`${size}px ${font}`;
    if(ctx.measureText(text).width<=maxWidth) break;
    size--;
  }while(size>14);
  return size;
}

/* PNG Download */
function download(type){
  const ratio=window.devicePixelRatio||1;
  const W=type==="landscape"?1400:900;
  const H=type==="landscape"?900:1400;

  const c=document.createElement("canvas");
  c.width=W*ratio;c.height=H*ratio;
  const ctx=c.getContext("2d");
  ctx.scale(ratio,ratio);

  const img=new Image();
  img.onload=()=>{
    ctx.drawImage(img,0,0,W,H);
    ctx.fillStyle="rgba(0,0,0,.55)";
    ctx.fillRect(0,0,W,H);

    ctx.fillStyle="#fff";
    ctx.textAlign="center";

    let fs=fitText(ctx,label.innerText,W-100,46,"Great Vibes");
    ctx.font=`${fs}px Great Vibes`;
    ctx.fillText(label.innerText,W/2,H*0.3);

    fs=fitText(ctx,quote.innerText,W-120,38,"Great Vibes");
    ctx.font=`${fs}px Great Vibes`;
    ctx.fillText(quote.innerText,W/2,H*0.4);

    fs=fitText(ctx,nepali.innerText,W-140,24,"Poppins");
    ctx.font=`${fs}px Poppins`;
    ctx.fillText(nepali.innerText,W/2,H*0.47);

    const a=document.createElement("a");
    a.href=c.toDataURL("image/png");
    a.download=`valentine-${type}.png`;
    a.click();
  };
  img.src=sessionStorage.getItem("img");
}

/* Share */
function share(){
  window.open(`https://wa.me/?text=${encodeURIComponent("I made a Valentine gift card for you üíñ")}`);
}

/* Nepali date (simple BS conversion) */
function toBS(d){
  const bsYear=d.getFullYear()+57;
  const bsMonth=d.getMonth()+8;
  const bsDay=d.getDate();
  return `${bsYear}-${bsMonth}-${bsDay}`;
}
</script>

</body>
</html>

